<%# provide(:@activity.activity_type.name) %>

<hgroup>
  <h1 class="text-right"><em>Editing My <%= @activity.activity_type.name %>  Activity </em></h1>
</hgroup>

<div class="d-flex flex-column">



  <div class="jumbotron">
  <hgroup>
  <h1 class="display-4 text-center"><%= font_awesome_tag(@activity.activity_type.fa_icon, "10rem") %> <%= @activity.activity_type.category %></h1>
  <h2><p class="lead">Date: <%= @activity.start_time.to_s(:short) %></p></h2>
  </hgroup>
  <hr class="my-2">
  
  </div>  <!-- jumbotron -->


<%= form_with(model: @activity, local: true) do |form| %>
  <% if @activity.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(activity.errors.count, "error") %> prohibited this activity from being saved:</h2>

      <ul>
      <% activity.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>


<% if   @activity.duration.nil?  %>
<%#= compute_duration(DateTime.now, @activity.start_time) %>
           <%#= form.hidden_field :activity_type_id, value: @activity.activity_type_id %>
           <%#= form.hidden_field :start_time, value: @activity.start_time %>
           <%= form.hidden_field :duration, value: compute_duration(DateTime.now, @activity.start_time) %>
           <%#= form.hidden_field :duration, value:  Time.now %>

  <div class="field actions my-2">
      <%= form.submit "Stop Timer!", class: "btn btn-md btn-primary" %>
  </div>



  <% else  %>
 

<div class="d-flex">

  <div class="field my-2">
  
      <%# <%= form.label :name %> 
      <%# <%= form.text_field :name %> 
     
     
    
     
          <div class="row btn-group btn-group-toggle" data-toggle="buttons">
          

          <% @activity_types.each do |activity_type|%>
    
           <div class="col-sm-4">
            <label class="btn btn-secondary">
                <%= radio_button("activity", "activity_type_id", activity_type.id) %>
                <%= activity_type.name %> 
                <%= font_awesome_tag(activity_type.fa_icon, "2rem") %>
            </label>
           </div>

          <% end %>

          
      
           </div>
  </div> 
  
   
    </div>  <!--d-flex -->










<br>




  <div class="field">
    <%= form.label :start_time %>
    <%= form.datetime_select :start_time, discard_year: true %>
  </div>

  <div class="field">
    <%= form.label :duration %>
    <%#= form.time_select :duration %>
    <%#= form.text_field :duration %>
    <%= form.range_field :duration, min: 0, max: 7200, step: 5 %>
  </div>



           <%#= form.hidden_field :start_time, value: Time.now %>
           <%#= form.hidden_field :end_time, value: nil %>
           <%#= form.hidden_field :duration, value: nil %>

<br>
  <div class="actions">
    <%= form.submit %>
  </div>


   <% end %> 
  
<% end %>





<br>
<%= link_to 'Back', activities_path,  class: "btn btn-md btn-info" %>